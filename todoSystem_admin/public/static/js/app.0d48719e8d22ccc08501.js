webpackJsonp([4],{"0J3B":function(e,t){},"4j+v":function(e,t){},"4ml/":function(e,t){},AFB7:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("7+uW"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("transition",{attrs:{"appear-active-class":"animate__animated animate__fadeIn"}},[t("router-view")],1)],1)},staticRenderFns:[]};var o=n("VU/8")({name:"App"},a,!1,function(e){n("mn01")},null,null).exports,s=n("/ocq"),u=n("Xxa5"),i=n.n(u),c=n("exGp"),l=n.n(c),m={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-container"},[n("van-sticky",[n("van-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:function(t){e.form.isRegister=!e.form.isRegister}}},[e._v("Todo 系统")])],1),e._v(" "),n("van-form",{on:{submit:e.onSubmit}},[n("van-field",{attrs:{name:"username",label:"昵称",placeholder:"昵称",rules:[{required:!0,message:"请填写用户名"}]},model:{value:e.form.username,callback:function(t){e.$set(e.form,"username",t)},expression:"form.username"}}),n("van-field",{attrs:{name:"user_account",label:"用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},model:{value:e.form.user_account,callback:function(t){e.$set(e.form,"user_account",t)},expression:"form.user_account"}}),e._v(" "),n("van-field",{attrs:{type:"password",name:"user_password",label:"密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},model:{value:e.form.user_password,callback:function(t){e.$set(e.form,"user_password",t)},expression:"form.user_password"}}),e._v(" "),e.form.isRegister?n("van-field",{attrs:{type:"text",name:"user_mobile",label:"手机号",placeholder:"手机号",rules:[{required:!0,message:"请填写手机号"}]},model:{value:e.form.user_mobile,callback:function(t){e.$set(e.form,"user_mobile",t)},expression:"form.user_mobile"}}):e._e(),e._v(" "),e.form.isRegister?n("van-field",{attrs:{type:"text",name:"user_address",label:"地址",placeholder:"地址",rules:[{required:!0,message:"请填写地址"}]},model:{value:e.form.user_address,callback:function(t){e.$set(e.form,"user_address",t)},expression:"form.user_address"}}):e._e(),e._v(" "),e.form.isRegister?n("van-field",{attrs:{type:"text",name:"user_sex",label:"性别",placeholder:"性别",rules:[{required:!0,message:"请填写性别"}]},model:{value:e.form.user_sex,callback:function(t){e.$set(e.form,"user_sex",t)},expression:"form.user_sex"}}):e._e(),e._v(" "),n("div",{staticStyle:{margin:"16px"}},[n("van-button",{attrs:{round:"",block:"",type:"info","native-type":"submit"}},[e._v("提交\n      ")])],1)],1)],1)},staticRenderFns:[]};var d=n("VU/8")({data:function(){return{form:{user_account:"",user_password:"",user_mobile:"",user_address:"",user_sex:"",username:"",isRegister:!1}}},methods:{onSubmit:function(e){this.$emit("submit",this.form)}}},m,!1,function(e){n("0J3B")},"data-v-3493b04b",null).exports,f=n("sgAt"),p={data:function(){return{active:!1,form:null,src:"https://cube.elemecdn.com/6/94/4d3ea53c084bad6931a56d5158a48jpeg.jpeg"}},components:{loginForm:d,Vcode:n.n(f).a},methods:{handleToSubmit:function(e){var t=this;return l()(i.a.mark(function n(){return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:t.active=!0,t.form=e;case 2:case"end":return n.stop()}},n,t)}))()},handleConfirmSubmit:function(e){var t=this;return l()(i.a.mark(function n(){var r,a;return i.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!e.isRegister){n.next=10;break}return n.next=3,t.$http.postRegister(e);case 3:return r=n.sent,t.$message({message:"注册成功",type:"success"}),t.active=!1,localStorage.setItem("token",r.token),n.next=9,t.$router.push({path:"/main"});case 9:return n.abrupt("return",null);case 10:return n.next=12,t.$http.postLogin(e);case 12:if(a=n.sent,t.active=!1,a.token){n.next=16;break}return n.abrupt("return",t.$message({message:a.msg,type:"danger"}));case 16:return t.$message({message:a.msg,type:"success"}),localStorage.setItem("token",a.token),n.next=20,t.$router.push({path:"/main"});case 20:return n.abrupt("return",null);case 21:case"end":return n.stop()}},n,t)}))()}}},v={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"login-container-main"},[n("img",{staticClass:"bg-login",attrs:{src:e.src}}),e._v(" "),n("el-card",{staticClass:"box-card"},[n("login-form",{on:{submit:e.handleToSubmit}})],1),e._v(" "),n("Vcode",{attrs:{show:e.active},on:{success:function(t){return e.handleConfirmSubmit(e.form)}}})],1)},staticRenderFns:[]};var h=n("VU/8")(p,v,!1,function(e){n("ZE0g")},"data-v-7f28d565",null).exports,g={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"main-container"},[n("router-view"),e._v(" "),n("van-tabbar",{model:{value:e.active,callback:function(t){e.active=t},expression:"active"}},[n("van-tabbar-item",{attrs:{icon:"home-o"},on:{click:function(t){return e.handleChangeRouter("/home")}}},[e._v("主页")]),e._v(" "),n("van-tabbar-item",{attrs:{icon:"friends-o"},on:{click:function(t){return e.handleChangeRouter("/mytodo")}}},[e._v("我的TODO")]),e._v(" "),n("van-tabbar-item",{attrs:{icon:"setting-o"},on:{click:function(t){return e.handleChangeRouter("/mine")}}},[e._v("个人信息")])],1)],1)},staticRenderFns:[]};var _=n("VU/8")({data:function(){return{active:0}},methods:{handleChangeRouter:function(e){this.$router.push(e).catch(function(e){})}}},g,!1,function(e){n("4j+v")},"data-v-61485cbd",null).exports;r.default.use(s.a);var b=new s.a({routes:[{path:"/",name:"login",component:h},{path:"/main",name:"main",component:_,redirect:"home",children:[{path:"/home",name:"home",component:function(){return n.e(0).then(n.bind(null,"UWyL"))}},{path:"/mytodo",name:"mytodo",component:function(){return n.e(1).then(n.bind(null,"nUlE"))}},{path:"/mine",name:"mine",component:function(){return n.e(2).then(n.bind(null,"U/b5"))}}]}]}),x=n("//Fk"),y=n.n(x),k=n("Dd8w"),w=n.n(k),R=n("mtWM"),$=n.n(R),j=n("Fd2+"),S=$.a.create({timeout:1e4,baseURL:"/api"}),C={400:"请求参数错误",401:"权限不足, 请重新登录",403:"服务器拒绝本次访问",404:"请求资源未找到",500:"内部服务器错误",501:"服务器不支持该请求中使用的方法",502:"网关错误",504:"网关超时"};S.interceptors.request.use(function(e){return console.log(e),"get"===e.method&&(e.params=w()({},e.params)),e},function(e){return y.a.reject(e)}),S.interceptors.response.use(function(e){return 200===e.status?(console.log(e),Object(j.a)({message:e.data.msg,type:"success"}),y.a.resolve(e.data)):(Object(j.a)({message:e.data.msg,type:"danger"}),y.a.reject(e.data))},function(e){if(console.log(e),e.response){var t=e.response.status in C?C[e.response.status]:e.response.data.message;return Object(j.a)({message:t,type:"danger"}),401===e.response.status&&b.push({path:"/"}),y.a.reject(e)}return Object(j.a)({message:"请求超时, 请刷新重试",type:"danger"}),y.a.reject(new Error("请求超时, 请刷新重试"))});var F=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new y.a(function(r,a){S(w()({method:"get",url:e,params:t},n)).then(function(e){r(e)}).catch(function(e){a(e)})})},T=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return S(w()({method:"post",url:e,data:t},n)).then(function(t){return console.log(e),y.a.resolve(t)}).catch(function(e){return y.a.reject(e)})},U=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new y.a(function(r,a){S(w()({method:"put",url:e,params:t},n)).then(function(e){r(e)}).catch(function(e){a(e)})})},q={postLogin:function(e){return T("/user/login",e)},postRegister:function(e){return T("/user/register",e)},postLoginOut:function(e){return T("/loginout",e)},getList:function(e){return F("/todo/get_share_todo",e)},getTodoList:function(e){return F("/todo/current",e)},postTodo:function(e){return T("/todo/new_todo",e)},finishTodxo:function(e){return U("/todo",e)},getUserInfo:function(e){return F("/user/userinfo",e)},sharedMyTodo:function(e){return U("/todo/share_todo",e)},delMyShare:function(e){return function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new y.a(function(r,a){S(w()({method:"delete",url:e,params:t},n)).then(function(e){r(e)}).catch(function(e){a(e)})})}("/todo/del_share_todo",e)},start:function(e){return U("/todo/start",e)},end:function(e){return U("/todo/end",e)}},E=(n("4ml/"),n("AFB7"),n("zL8q")),L=n.n(E);n("tvR6");n("telf"),r.default.config.productionTip=!0,r.default.prototype.$message=j.a,r.default.prototype.$http=q,r.default.use(j.b),r.default.use(L.a),new r.default({el:"#app",router:b,components:{App:o},template:"<App/>"})},ZE0g:function(e,t){},mn01:function(e,t){},telf:function(e,t,n){var r=n("zNUS"),a=r.Random;r.mock("/api/img",function(e){for(var t=[],n=0;n<5;n++)t.push(a.image("200x100","#4A7BF7","Todo"));return t})},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.0d48719e8d22ccc08501.js.map